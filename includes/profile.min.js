const ModalProfile={profile:null,init(){return this.profile=query("div.profile_anim"),this},show(s=null){this.profile.classList.remove("hide"),this.profile.classList.add("show"),setTimeout((()=>{this.profile.classList.add("hide"),this.profile.classList.remove("show"),s&&s()}),3e3)}}.init(),ModalPass={modal:null,pass:null,clb:null,init(){return this.modal=new ModalForm("#modal_pass"),this.pass=query('#modal_pass input[type="password"]'),bind("#modal_pass form","submit",(s=>{s.preventDefault(),this.submit()})),this},submit(){this.clb&&this.clb({password:this.pass.value}),this.modal.hide()},show(s=null){this.clb=s,this.pass.value="",this.modal.show(),setTimeout((()=>{this.pass.focus()}),200)}}.init(),app={name:null,email:null,password:null,confirm:null,init(){this.name=query('form#profile input[name="name"]'),this.email=query('form#profile input[name="email"]'),this.password=query('form#profile input[name="password"]'),this.confirm=query('form#profile input[name="confirm"]'),bind("form#profile","submit",(s=>{s.preventDefault(),this.submit()}))},submit(){if(this.password.value!=this.confirm.value)ModalBox.error("Votre mot de passe et sa confirmation ne concordent pas.",(()=>{this.confirm.value="",setTimeout((()=>{this.password.focus()}),200)}));else{let s={name:this.name.value.trim(),email:this.email.value.trim()};this.password.value.length>0&&(s.password=this.password.value),ModalPass.show((i=>{s.confirm=i.password,postmodal((()=>{ModalProfile.show((()=>{redirectReferer()}))}),s)}))}}}.init();