const app={email:null,pass:null,err_row:null,err_cell:null,init:function(){this.email=query('form#login input[name="email"]'),this.pass=query('form#login input[name="password"]'),this.err_row=query("form#login tr.login_msg"),this.err_cell=query("form#login tr.login_msg td"),bind("form#login","submit",(r=>{r.preventDefault(),this.submit()})),this.email.focus()},submit:function(){post({email:this.email.value,password:this.pass.value},!0).then((r=>{null==r||null==r.success?this.error("Erreur inconnue"):r.success?document.location.href=root:this.error(r.errmsg)}))},error:function(r){this.err_cell.innerHTML=r,this.err_row.classList.add("show")}};